\chapter{Приложения программной системы}
\label{part:examples}

В данной главе продемонстрированы примеры применения разработанных инструментальных средств  для решения практических задач. %В частности, рассматривается пример

%-----------------------------------------------------------------------------------------
%---------------------Эксперименты, тестирование, сравнение------------------------------
%-----------------------------------------------------------------------------------------
\section{Применимость}
Как видно, каждый узел дерева состояний вывода отождествляется с шагом вывода. Кроме того, узел содержит очень много дополнительной информации, т.е. потребляет ресурсы памяти, причем с каждым шагом вывода потребление может увеличиваться. Таким образом с точки зрения потребляемости ресурсов прувер эффективнее использовать на задачах имеющих крупноблочную структуру, т.е., при формализации конъюнкты действительно должны быть конъюнктами, а не вырожденными одноэлементными или пустыми, древовидная структура действительно должна быть древовидной, глубокой, а не с глубиной 4. Таким образуом получится что каждый узел будет “обслуживать” довольно объемные и информативные куски данных. Одновременно с этим язык ПО--формул как раз и позиционируется как крупноблочный. Отсюда предположительно успех может возникнуть в задачах, формализуемых в языке ПО--формул таким образом, чтоб как можно сильнее выпячивалась крупноблочность. %В самой крупной библиотеке формализованных задач из 10000 задач оказалось что 2000 обладают этим свойством. Поэтому тестирование и сравнение будет проводиться в следующих выборках: задачи которые предположительно наиболее удачно подходят для нашего прувера; и задачи которые предположительно являются неподходящими.

%С другой стороны задачи с неограниченными переменными приводят к использования стратегии ленивой конкретизации, что в конечном итоге может усложнить прозрачность логического вывода. Отсюда к перечисленным выше выборкам будут добавлены задачи с ограниченным и неограниченными переменными.



%=============================== ТЕСТИРОВАНИЕ И СРАВНЕНИЕ======================
\section{Тестирование и сравнение}

Тестирование системы проводилось на задачах из библиотеки TPTP (Thousands of Problems for Theorem Provers, www.tptp.org). Данная библиотка является де--факто стандартом для тестирования систем АДТ. На момент написания работы библиотека содержала свыше 20000 задч, формализованных на языке предикатов первого порядка (FOF: first-order formula), конъюнктивной нормальной формы (CNF: conjunctive normal form), TFF. Кроме того, в системе зарегистрированы самые передовые современные системы АДТ.

Все задачи классифицированы по некоторым параметрам, а именно:
\begin{enumerate}
\item Рейтинг. Измеряется числом от 0.0 до 1.0. Задача с рейтингом 0 может быть решена любым проверенным прувером внесённым в библиотеку. Задача с рейтингом 1.0 ещё не была решена ниодной системой. Внесенные в систему пруверы именуются как state-of-the-art systems. Задачи с рейтингом выше 0.05 уже относятся к классу сложных (difficult). Тестирование имеет смысл проводить по всем видам рейтинга от 0.0 до 1.0.
\item Предметная область задачи. Например, теоремы математического анализа (ANA), алгебры (ALG), геометрии (GEO), головоломки (PUZ), медицины (MED), и др.
\item Количественные характеристики формулы. Например, количество предикатов, функциональных символов, наличие предиката равенства, общий объем формулы.
\item Важным параметром формулы являетя её статус: теорема (theorem), выполнима (satisfiable), невыполнима (unsatisfiable), неизвестно (unknown), открытая проблема (open), т.е. в принципе не решенная задача.
\end{enumerate}

Отметим, что библиотека регулярно обновляется и пополняется новыми задачами, требующих решения.
%Теоремы выводимы в исчислении ПО--формул, выполнимые задачи невыводимы.

%-------------------
%Хорошая эффективность продемонстрирована на задачах из области геометрии.

В данной главе представлены примеры решения задач, включая описание формулировки задачи, формулизаций целей, сравнения с другими системами, зарегистрированными в TPTP, и некоторыми статистическими данными о формулах.

Ряд решенных задач представлен в приложении.


%================================================================
\subsection{Сложные задачи}
%LCL876+1, рейтинг 1.0... Noooooooooooooooooooo (Косяк есть)
Разработанной системой решен ряд задач, считающихся весьма сложными и имеющих рейтинг 0.5 и выше. Приведём описания данных задач.

%SYN723+1; рейтинг 0.5; на этапе трансляции

\paragraph{SYN353+1} Рейтинг задачи 0.54, т.е. менее половины учтённых систем могут решить её.
Разработанная система решает её за 33 шага, без учета стратеги k,m-ограничений, т.е. фактически шагов может быть больше, но глубина окончательного вывода 33. Затраченное время 1.1с. Для сравнения, Vampire решает эту задачу за 0.7с, SPASS за 0.78с, Prover9 за 4.0с.

Задача взята из книги \cite{Church1}, где имеет номер  46.18 (5). В формате FOF TPTP формализуется следующим образом:

\begin{quote}
\texttt{\raggedright\noindent
fof(church\_46\_18\_5,conjecture,\\
~~~~(~!~[X]~:\\
~~~~~~?~[Y1,Y2,Y3]~:\\
~~~~~~!~[Z]~:\\
~~~~~~~~(~(~big\_f(Y1,Y2,Y3)\\
~~~~~~~~~=>~(~big\_f(X,X,Z)\\
~~~~~~~~~~~=>~(~big\_f(Y2,Y3,Y1)\\
~~~~~~~~~~~~~~|~big\_f(Y3,Y1,Y2)~)~)~)\\
~~~~~~~=>~(~(~(~big\_f(Y3,Y1,Y2)\\
~~~~~~~~~~~~~=>~(~big\_f(Y1,Y2,Y3)\\
~~~~~~~~~~~~~~~~\&~big\_f(Y2,Y3,Y1)~)~)\\
~~~~~~~~~~<=>~big\_f(Y2,Y1,Z)~)\\
~~~~~~~~~=>~(~(~(~big\_f(Y2,Y3,Y1)\\
~~~~~~~~~~~~~~~=>~(~big\_f(Y1,Y2,Y3)\\
~~~~~~~~~~~~~~~~~~~big\_f(Y3,Y1,Y2)~)~)\\
~~~~~~~~~~~~<=>~big\_f(Y1,Z,Y2)~)\\
~~~~~~~~~~~=>~(~(~(~(~big\_f(Y3,Y1,Y2)\\
~~~~~~~~~~~~~~~~~~~=>~\~~big\_f(Y2,Y3,Y1)~)\\
~~~~~~~~~~~~~~~~~=>~big\_f(Y1,Y2,Y3)~)\\
~~~~~~~~~~~~~~<=>~big\_f(Z,Y2,Y1)~)\\
~~~~~~~~~~~~~=>~(~(~big\_f(Y1,Y2,Y3)\\
~~~~~~~~~~~~~~~~~~\&~big\_f(Y2,Y3,Y1)\\
~~~~~~~~~~~~~~~~~~\&~big\_f(Y3,Y1,Y2)~)\\
~~~~~~~~~~~~~~<=>~big\_f(Z,Z,Z)~)~)~)~)~)~)).}
\end{quote}


\paragraph{SWB020+2}
Рейтинг 0.5. Время реешения 1.32 секунды. Для сравнения, Vampire 8с, Otter 1.1c, EP 0.2с.

Формализация занимает 60 атомов и 8 подформул--вопросов. Формализация в языке ПО--формул занимает 5кб, и представлена в приложении.

%LCL631+1.005
\paragraph{LCL636+1.005}
Рейтинг 0.5. Время решения 5 секунд. Количество шагов 20, без учёта возможных возвратов. Для сравнения, EP 0.5c, Vampire 1.2c, iProver 8c, Prover9 13c.

Формулировка: ``The branching formula plus a negation symbol in front and an additional subformula to make the formula provable''.
Взято из статьи \cite{SourceLCL}.

Формализация включает 719 атомов и 1361 логическую связку.


%LCL640+1.005
\paragraph{LCL640+1.005}
Рейтинг 0.62. Время решения 0.4 секунды. Количество шагов 130, без учёта возможных возвратов. Для сравнения, Vampire 0.1с, SPASS 9с, iProver 35c, EP 98c.

Формализация включает 121 атом и 236 логических связок.

%LCL652+1.005
%\paragraph{LCL652+1.005}
%рейтинг 0.79. решает быстро..

%===============================================================
\subsection{Задачи геометрии}
Рассмотрим более подробную информацию о задачах из геометри и сравнеии с другими системами. Полный список решенных задач представлен в приложении.

%----------------------------------------------
\paragraph{GEO222+3.p}
Рейтинг 0.17. Время решения 0.01с. Количество шагов 27. Для сравнения, EP 0.03c, Vampire 0.03c, Otter 0.5c, Prover9 0.6c.

Формулировка задчи: ``A line L is parallel to the line, that is orthogonal to the orthogonal to L through A, and goes through A as well''.

Формализация цели следующая:
\begin{quote}
\texttt{\raggedright\noindent{}fof(con,conjecture,(\\
~~~~!~[A,L]~:~parallel\_lines(L,\\
~~~~~~~~~orthogonal\_through\_point(\\
~~~~~~~~~~~~~orthogonal\_through\_point(L,A),A))~)).}
\end{quote}
При этом используется 7 групп аксиом, общий объём которых в языке ПО--формул составляет 5~кб.

%----------------------------------------------
\paragraph{GEO264+1}
Рейтинг 0.04. Время решения 0.005с. Для сравнения, Ayane 0.01c, Vampire 0.01, iProver 0.04c.

Формулировка: ``Traingle divides plane into seven regions''.

Формализация цели:
\begin{quote}
\texttt{\raggedright\noindent
fof(con,conjecture,(\\
~~~~!~[A,B,C,D]~:\\
~~~~~~(~left\_apart\_point(C,line\_connecting(A,B))\\
~~~~~=>~(~(~left\_apart\_point(D,reverse\_line(line\_connecting(B,C)))\\
~~~~~~~~~~\&~left\_apart\_point(D,reverse\_line(line\_connecting(C,A))))\\
~~~~~~~=>~left\_apart\_point(D,line\_connecting(A,B))~)~)~)).}
\end{quote}
Используется набор аксиом GEO007+0 из \cite{constrgeo}.

%----------------------------------------------
\paragraph{GEO205+3}
Рейтинг 0.33. Время решения 0.08. Количество шагов 12. Для сравнения, Ayane 0.26c, Vampire 0.42c, EP 1.63c.

Формалуировка: ``If the lines X and Y are convergent, and Y and Z are  equivalent, then X and Z are convergent, and the intersection   point of X and Y, and the intersection point of X and Z are equal''.
\begin{quote}
\texttt{\raggedright\noindent
fof(con,conjecture,(\\
~~~~!~[X,Y,Z]~:\\
~~~~~~(~(~convergent\_lines(X,Y)\\
~~~~~~~~\&~equal\_lines(Y,Z)~)\\
~~~~~=>~(~convergent\_lines(X,Z)\\
~~~~~~~~\&~equal\_points(intersection\_point(X,Y),\\
~~~~~~~~~~~intersection\_point(X,Z))~)~)~)).\\
~~~~~~~~}
\end{quote}
При этом используется 7 групп аксиом, общий объём которых в языке ПО--формул составляет 5~кб.

%============================================================
\subsection{Задачи менеджмента}

\paragraph{MGT001+1}
Рейтинг 0.12. Время решения 0.01с. Для сравнения, Vampire 0.01c, EP 0.05c.

Фрмулировка: ``Selection within populations of organizations in modern societies favours organizations whose structure have high inertia''.

\paragraph{MGT015+1}
Рейтинг 0.12. Время решения 0.1с. Для сравнения, Vampire 0.01c. EP 0.01, Ayane 3.2c.

Формулировка: ``Complexity increases the expected duration of reorganisation''.

\paragraph{MGT017+1}
Рейтинг 0.12. Время решения 0.05с. Для сравнения, Vampire 0.01c, EP 0.01c, Ayane 3.1c.

 Формулировка: ``The length of reorganizational period grows by the size the organization begins reorganization (if the bigger organization survives it)''.

%\paragraph{MGT018+1.p}
%The bigger an organization is at the beginning of reorganization, the sooner disbanding due to reorganization (possibly) happens - i.e. the shorter is the reorganization.


%===============================================================
\subsection{Задача из медицины}
Основным источником формализации задач медицины является работа \cite{med1}.

\paragraph{MED011+1}
Рейтинг 0.33. Время решения 11с. Для сравнения, Vampire 1c, iProver 13.7c. Отметим что данная задача решается всего тремя системами АДТ.

Формулировка: ``Satisfiability of medical subject headings axioms (MED002+0)''

Количество атомов 568530.


\paragraph{MED002+1}
Рейтинг 0.38. Время решения 0.04с. Для сравнения, Vampire 0.01c, iProver 0.04c, SPASS 6.78c.

Формулировка: ``Whether or not patients with nearly-exhausted production of glucose in the B-cells are cured with a biguanide and sulfonylurea combination therapy''.

Формализация цели:
\begin{quote}
\texttt{\raggedright\noindent{}fof(treatmentne,conjecture,\\
~~~~(~(~!~[X0]~:\\
~~~~~~~~~~(~\~~gt(n0,X0)\\
~~~~~~~~~=>~(~drugbg(X0)\\
~~~~~~~~~~~~\&~drugsu(X0)~)~)\\
~~~~~~\&~!~[X0]~:\\
~~~~~~~~~~(~gt(n0,X0)\\
~~~~~~~~~=>~conditionhyper(X0)~)\\
~~~~~~\&~bcapacityne(n0)~)\\
~~~=>~!~[X0]~:\\
~~~~~~~~(~\~~gt(n0,X0)\\
~~~~~~~=>~conditionnormo(X0)~)~)).}
\end{quote}

При этом используется следующий набор аксиом MED001+0, включающий в себя 18 формул.

%-------------------------------------
\paragraph{MED009+1}
Рейтинг 0.54. Время решения 1.9c. Для сравнения, Vampire 1.2c, EP 14c, SPASS 18.7c.

Формулировка: ``After unsuccessful treatment with single oral anti-diabetic for patients with QI greater equal than 27 medical management moves to next step.''

Формализация цели:
\begin{quote}
\texttt{\raggedright\noindent{}
fof(transs1s2\_qige27,conjecture,\\
~~~~(~(~s1(n0)\\
~~~~~~\&~!~[X0]~:\\
~~~~~~~~~~(~gt(n0,X0)\\
~~~~~~~~~=>~conditionhyper(X0)~)\\
~~~~~~\&~\~~bcapacitysn(n0)\\
~~~~~~\&~\~~qilt27(n0)~)\\
~~~=>~?~[X0]~:\\
~~~~~~~~(~\~~gt(n0,X0)\\
~~~~~~~~\&~s2(X0)\\
~~~~~~~~\&~!~[X1]~:\\
~~~~~~~~~~~~(~gt(X0,X1)\\
~~~~~~~~~~~=>~conditionhyper(X1)~)\\
~~~~~~~~\&~(~bcapacityne(X0)\\
~~~~~~~~~~|~bcapacityex(X0)~)~)~)).}
\end{quote}

Используется две группы аксиом MED001+1 и MED001+1.

%-------------------------------------
\paragraph{MED010+1}
Рейтинг 0.46. Время решения 3.1 секунды. Для сравнения, iProver 0.05c, Vampire 0.05c, EP 6c.

Формулировка: ``After unsuccessful treatment with two oral anti-diabetic medical management moves to next step''.

Формализация цели в FOF формата TPTP выглядит так:
\begin{quote}
\texttt{\raggedright\noindent{}fof(unsuccesfuls2,conjecture,
~~~~(~(~s2(n0)\\
~~~~~~\&~!~[X0]~:\\
~~~~~~~~~~(~gt(n0,X0)\\
~~~~~~~~~=>~conditionhyper(X0)~)\\
~~~~~~\&~bcapacityex(n0)~)\\
~~~=>~?~[X0]~:\\
~~~~~~~~(~~~gt(n0,X0)\\
~~~~~~~~\&~s3(X0)\\
~~~~~~~~\&~!~[X1]~:\\
~~~~~~~~~~~~(~gt(X0,X1)\\
~~~~~~~~~~~=>~conditionhyper(X1)~)\\
~~~~~~~~\&~bcapacityex(X0)~)~)).}
\end{quote}

При это используется две группы аксиом: MED001+0 (18 формул) и MED001+1 (22 формулы).



%=========================================================
%\subsection{Задачи верификации}


%===============================================================
%\subsection{Задачи головоломки}
%PUZ031+1
%20 шагов
%0.08с


%===============================================================
\subsection{Крупные задачи}
Рассмотрим поведение системы при решении некоторых крупных задач, формализация которых превышает 1~Мб. Как правило, это задачи с формализацией очень большого количества аксиом, многие из которых не пригождаются в выводе, т.е. ответы на многие вопросы заведомо не приносят никакой пользы, более того, наоборот, захламляют вывод. Основной тактикой при решении таких задач является во-первых повсеместное использование экономии памяти, тщательное использование собранной статистики для удаления ненужных фактов и вопросов, и использование знаний о задаче, для выявленя заведомо плохих ветветй вывода.

Примером, успешного решения крупной аздачи, является задача MED011+1.

\paragraph{CSR025+3}
Рейтинг 0.17. Время решения 1с. Для сравнения, Vampire 0.14c, EP 0.7c, iProver 1.5c.

Данная задача содержит 1 группу аксиом, содержащую 8006 формул и 13036 атомов.
%Формализация в языке ПО--формул составляет .. байт. Количество вопросов ... из них с неограниченными переменными ..., глубоких ..., с дизъюнктивным ветвлением ..., целевых ... . Количество атомов ..., количество функциональных символов...

\paragraph{CSR115+92}
Рейтинг 0.46. Время решения 4.4с. Для сравнения, EP 0.24c, iProver 5.8c.
Формулировка: ``Which British company was taken over by BMW in 1994?''

Количество формул 10189. Количество атомов 10803.


\paragraph{PUZ068+2}
Задача относится к классу satisfiable.

Рейтинг 0.0. Время решения 4с. Для сравнения. Vampire 1.1c, iProver 1.7c, EP 1.8c.

%Формулировка: Monday's Sudoku.

Количество формул 10547. Количество атомов 23545.




%===============================================================
\subsection{Разное}
%Задачи которые стоит посмотреть:
%SYN457+1.p

%Из решенных задач время быстрее чем у Otter. Оттер выводит системную инфу всякую, поэтому думаю сопоставимо время на самом деле.

%Задача; Рейтинг; Статус (Решил ли прувер); Комментарий.

%ALG211+1; 0.12; Теорема (Да); 0.05 и 40 шагов.
%GRA014; 0.00; Теорема (Да); 1.2с и 5201 шагов. У Otter уходит 7 секунд. При этом вывод системной инфы не такой огромный.
%SET913+1; 0.04; ..


%Новое
\paragraph{MSC010+1}
Рейинг 0.33. Время решеня 0.03с. Количество шагов 812. Для сравнения, EP 0.01, Vampire 0.5c, iProver 3.8c.

Формулировка: ``Verification of the negation of a conjecture, which is simply to prove the double negated version of a formula from the formula''.

Формализация включает 136 атомов.


%------------
%MSC011+1; 7, 0.0002; 0.0
%MSC012+1; 48, 0.02; 0.12

%----------------------
\paragraph{MSC014+1}
Рейтинг 0.33. Время решения 0.0007с. Для сравнения, EP, Vampire, iProver все близко к 0.

Задача является satisfiable.

%===============================================================
\subsection{Сравнение с системами АДТ ИДСТУ СО РАН}
Задача о паровом катке, как демонстрация решения сложной задачи была представлена в диссертации Черкашина Е.А. \cite{dissChe}.
В библиотеке TPTP на данный момент она имеет три формализации PUZ031+1 (рейтинг 0.08), PUZ031+2 (рейтинг 0.04), PUZ031+3 (рейтинг 0.08).

Решение всех трёх вариантов осуществляется за 0.005 (близко к 0), 0.002 (близко к 0) и 0.4 секунды соответстенно. Глубина вывода 19 (является минимально возможным выводом). Для сравнения, EP, Vampire, Otter близко к 0. С учётом прокола вывода во всех перечисленных системах, включая нашу не более 0.8 секунд.

То есть, заметно повышение производительности, как с точки зрения количества шагов, так и с точки зрения затраченного времени.

%телескоп, леса, бутаков...

%===========================
%\subsection{Отличия доказательства ПО--формул от метода резолюций}


%==============================================================================
%=============================================================================
%=============================================================================
%=========================ВЫВОДЫ================================================
\section{Выводы}
Система протестирована на разных классах задач, в основном взятых из библотеки TPTP. Манипуляцию с включением и отключением стратегий показывают что они положительно влияют на эффективность поиска ЛВ. В некоторых случаях, включение параллельного режима вызывает обратный эффект, т.е. замедление, это связано с тем что решаемая задача сама по себе достаточно проста, а  накладные расходы связанные с созданием дополнительных процессов, копирования данных и т.д. превышает полезный ресурс направленный на опровержение баз.

Сравнение с иными системами АДТ, показывает что разработанная система выигрывает по времени чаще всего при решении таких задач, формализация которых содержит достатончо объёмные конъюнкты, экзистенциальные переменные и глубокие вопросы.

Значительный прирост эффективности достигается за счёт кэширования результатов. Опыты показывают что во время поиска ЛВ производится множество дублирующихся шагов и добавление повторяемой информации.

Выигрыши по сравнению с другими системами выражается меньшим временем решения задач средней или лёгкой сложности. Системы мирового уровня имеют приоритет при решении задач крайне высокого рейтинга (в случае библиотки TPTP, выше 0.8).



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "dis"
%%% End:
